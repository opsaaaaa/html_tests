<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="stylesheet" href="/style.css">
  <title>Document</title>

  <meta 
    http-equiv="Content-Type" 
    content="text/html; charset=UTF-8"
    >

  <meta 
    name="viewport" 
    content="width=device-width, initial-scale=1"
    >

</head>
<body>

<h1>Something</h1>

<div class="reader-wrapper">
	<div id="reader"></div>
	<div class="hbox arrow-box">
		<button id="prev" class="arrow">‹</button>
		<button id="next" class="arrow">›</button>
	</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.5/jszip.min.js"></script>
<script src="/epub.js"></script>

<script>

	var book = ePub("/just_poor.epub");
	var rendition = book.renderTo("reader", {
		manager: "continuous",
		flow: "paginated",
		width: '100%', 
		height: '100%', 
		"allowScriptedContent": true
	});
	console.log(rendition);


	var bookStyle = document.getElementById('book-style')
	var displayed = rendition.display();
	
	var next = document.getElementById("next");
	next.addEventListener("click", function(){
		rendition.next();
	}, false);

	var prev = document.getElementById("prev");
	prev.addEventListener("click", function(){
		rendition.prev();
	}, false);

	rendition.themes.default("book.css")
	
	// rendition.themes.register("main", "themes.css");
	// rendition.themes.select('main');	

	// Handling Dark and light themes inside js
	// rendition.themes.register("dark", "themes.css");
	// rendition.themes.register("light", "themes.css");
	
	// mm = window.matchMedia("(prefers-color-scheme: dark)")

	// rendition.themes.select(mm.matches ? 'dark': 'light');	
	// mm.addListener(e => {
	//	rendition.themes.select(e.matches ? 'dark' : 'light')
	// });

	// rendition.themes.default({
	// 	p: {
	//		'text-indent': '2em'
	//	},
	// });


    // $(window).on( "swipeleft", function( event ) {
    //   rendition.next();
    // });
    //
    // $(window).on( "swiperight", function( event ) {
    //   rendition.prev();
    // });

</script>

</body>
</html>


